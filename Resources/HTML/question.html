<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0047) -->
<html>
	<head>
	  <meta charset="utf-8" />
	  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
	   Remove this if you use the .htaccess -->
	  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	
	  <title>質問</title>
	</head>
<body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<script>
function getUrlVars() 
{ 
    var vars = [], hash; 
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&'); 
    for(var i = 0; i < hashes.length; i++) { 
        hash = hashes[i].split('='); 
        vars.push(hash[0]); 
        vars[hash[0]] = hash[1]; 
    } 
    return vars; 
}
var getParam=getUrlVars();

function movePage(page){
 	location.href="question.html?id="+page;
 	return true;
 }
 
 $(function() {
 	//jsonでページ＆選択肢をとってくる
 	var pageArray=[1,2,3];
 	var questionArray=[1,2,3,4,5];
 	var correct=2;//正解
 	var check_question=null;
 	
 	//ページ
 	$("#pageid").html(getParam["id"]);
 	//前・次
 	var prev=0;
 	var next=0;
 	var counter=0;
 	var temp=null; 
 	$.each(pageArray, function() {
		if(getParam["id"] == this && counter > 0){
			prev=counter;
			temp=1;
		}
		if(temp && getParam["id"] != this){
			next=this;
			temp=null;
		}
		counter++;
 	});

 	if(prev > 0){
 		$("#prev").html("<a href=\"#\" onClick=\"movePage("+prev+");\">前のページ</a>");
 	}
 	if(next > 0){
 		$("#next").html("<a href=\"#\" onClick=\"movePage("+next+");\">次のページ</a>");
 	}

 	//選択するまでは回答できない
 	$("#answer").attr("disabled",true);
 	
 	//選択肢
	$.each(questionArray, function() {
	   $("#question").append("<div id=\"q_"+this+"\">"+this+"</div>");
	});
	
	var kaito=null;
	$("[id^=q_]").click(function(){
		$("#answer").removeAttr("disabled");
		$(this).css("color","red");
		kaito = $(this).text();
		$("#a").val(kaito);
	});

	$("#answer").click(function(){
		if(kaito == correct){
			check_question="○";
		}else{
			check_question="×";
		}
		alert("現在のページ:"+getParam["id"]+" あなたの回答:"+kaito+" 正解:"+correct+" チェック:"+check_question);
		Ti.App.fireEvent('kaito', {param1 : kaito});
	});
	
});

</script>

ページ<div id="pageid"></div><br>
<div id="question"></div>
<form>
	
<br /><br />
<span id="a"><input type="hidden" name="a" value=""></span>
<div id="answer"><input type="button" value="回答する"></div>
</form>

<div id="prev"></div>
<div id="next"></div>
</body>
</html>